<div class="projects__table" ng-controller="programmeCtrl as programme">
    <div class="table-container--project" ng-init="programme.nodeId = '{$ data.id $}'; programme.nodeType = '{$ data.type $}'; programme.getNodeData()">
        <h3>{$ __('cms.programme.projects') $}</h3>
        <table class="table">
            <thead>
                <tr>
                <th><a ng-click="sortField = 'title'; sortReverse = !sortReverse">{$ __('cms.programme.project') $}</a><div ng-show="sortField == 'title' && !sortReverse" class="gb-icon-angle-down"></div><div ng-show="sortField == 'title' && sortReverse" class="gb-icon-angle-up"></div></th>
                <th><a ng-click="sortField = 'grantType'; sortReverse = !sortReverse">{$ __('cms.programme.grantType') $}</a><div ng-show="sortField == 'grantType' && !sortReverse" class="gb-icon-angle-down"></div><div ng-show="sortField == 'grantType' && sortReverse" class="gb-icon-angle-up"></div></th>
                <th><a ng-click="sortField = 'duration.start'; sortReverse = !sortReverse">{$ __('cms.programme.duration') $}</a><div ng-show="sortField == 'duration.start' && !sortReverse" class="gb-icon-angle-down"></div><div ng-show="sortField == 'duration.start' && sortReverse" class="gb-icon-angle-up"></div></th>
                <th><a ng-click="sortField = 'fundingAllocated'; sortReverse = !sortReverse">{$ __('cms.programme.fundingAllocated') $}</a><div ng-show="sortField == 'fundingAllocated' && !sortReverse" class="gb-icon-angle-down"></div><div ng-show="sortField == 'fundingAllocated' && sortReverse" class="gb-icon-angle-up"></div></th>
                <th><a ng-click="sortField = 'estimatedCoFunding'; sortReverse = !sortReverse">{$ __('cms.programme.estCoFunding') $}</a><div ng-show="sortField == 'estimatedCoFunding' && !sortReverse" class="gb-icon-angle-down"></div><div ng-show="sortField == 'estimatedCoFunding' && sortReverse" class="gb-icon-angle-up"></div></th>
                <th><a ng-click="sortField = 'status'; sortReverse = !sortReverse">{$ __('cms.programme.status') $}</a><div ng-show="sortField == 'status' && !sortReverse" class="gb-icon-angle-down"></div><div ng-show="sortField == 'status' && sortReverse" class="gb-icon-angle-up"></div></th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="(index, project) in programme.node.relatedProjects | orderBy:sortField:sortReverse">
                    <td><a href="/{{ project.targetUrl }}">{{ project.title }}</a></td> {# title #}
                    <td class="text-nowrap" translate="cms.projectGrantType.{{ project.grantType }}"></td> {# grant type #}
                    <td class="text-nowrap">{{ project.duration.start * 1000 | date:'longDate' }} {$ __('cms.projectDuration.to') $}<br>{{ project.duration.end * 1000 | date:'longDate' }}</td> {# duration #}
                    <th>{$ __('cms.programme.fundingAllocated') $}</th>
                    <td class="text-nowrap currency-allocated">&euro; {{ project.fundingAllocated | number: 2 }}</td> {# funding #}
                    <th>{$ __('cms.programme.estCoFunding') $}</th>
                    <td class="text-nowrap currency-estimated">&euro; {{ project.estimatedCoFunding | number: 2}}</td> {# estimated co-funding #}
                    <td class="text-nowrap" translate="cms.projectStatus.{{ project.status }}"></td> {# status #}
                </tr>
            </tbody>
        </table>
    </div>
</div>