<h3 translate="validation.issues" ></h3>
<div>
    <div class="scrollable-y" ng-repeat="(issueCategory, issueBlockList) in resultPerResource.issuesMap">
        <h4 translate="validation.category.{{ issueCategory }}"></h4>

        <!--<span class="badge-composite&#45;&#45;{{issue.severity | lowercase }}"-->
              <!--ng-repeat="issue in occDownload.issues | limitTo:occDownload.issueLimit">-->
                                                <!--<span class="badge">{{issue.count | localNumber:occDownload.state.query.locale }}</span>-->
                                                <!--<span class="badge">{{'occurrenceIssue.' + issue.title | translate}}</span>-->
                                            <!--</span>-->


        <div  ng-repeat="issueBlock in issueBlockList">

            <a class="badge-composite--{{issueBlock.severity | lowercase }}"
               ng-click="dataValidator.issueSampleExpanded[issueBlock.issue] = !dataValidator.issueSampleExpanded[issueBlock.issue]">



                <span class="badge"
                      translate="validation.issueType.{{ issueBlock.issue }}" ng-if="issueCategory !== 'OCC_INTERPRETATION_BASED' && issueCategory !== 'CLB_INTERPRETATION_BASED'"></span>
                <span  class="badge" ng-if="issueCategory === 'OCC_INTERPRETATION_BASED'"
                       translate="occurrenceIssue.{{ issueBlock.issue }}"></span>
                <span  class="badge" ng-if="issueCategory === 'CLB_INTERPRETATION_BASED'"
                       translate="taxon.issueEnum.{{ issueBlock.issue }}"></span>
              <span class="badge" ng-if="issueBlock.issue === 'UNKNOWN_TERM' || issueBlock.count"> {{ (issueBlock.issue !== 'UNKNOWN_TERM') ? issueBlock.count : issueBlock.relatedData}}</span>
                <span class="badge" ng-if="issueBlock.issue !== 'UNKNOWN_TERM' && !issueBlock.count">!</span>

            </a>

                <!--<a class="badge-composite&#45;&#45;{{issueBlock.severity | lowercase }} href="" ng-if="issueCategory === 'OCC_INTERPRETATION_BASED' || issueCategory === 'CLB_INTERPRETATION_BASED'"-->
                   <!--ng-click="dataValidator.issueSampleExpanded[issueBlock.issue] = !dataValidator.issueSampleExpanded[issueBlock.issue]">-->

                <!--<span  ng-if="issueCategory === 'OCC_INTERPRETATION_BASED'"-->
                       <!--translate="occurrenceIssue.{{ issueBlock.issue }}"></span>-->
                    <!--<span  ng-if="issueCategory === 'CLB_INTERPRETATION_BASED'"-->
                           <!--translate="taxon.issueEnum.{{ issueBlock.issue }}"></span>-->
                <!--</a>-->



            <table ng-if="issueBlock.sample" class="table table-bordered table-striped"
                   ng-show="dataValidator.issueSampleExpanded[issueBlock.issue]">
                <thead>
                <tr>
                    <th ng-repeat="issueLine in issueBlock.headers">
                        {{ issueLine }}
                    </th>

                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="issueSample in issueBlock.sample">
                    <td ng-repeat="issueLine in issueBlock.headers" class="table-cell--wide">
                        {{ issueSample.allData[issueLine] }}
                    </td>

                </tr>
                </tbody>
            </table>

            <table ng-if="!issueBlock.sample || issueBlock.sample.length ===0" class="table table-bordered table-striped"
                   ng-show="dataValidator.issueSampleExpanded[issueBlock.issue]">
                <thead>
                <tr>
                    <th ng-repeat="(key, val) in issueBlock">
                        {{ key }}
                    </th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td ng-repeat="(key, val) in issueBlock" class="table-cell--wide">
                        {{ val }}
                    </td>
                </tr>
                </tbody>
            </table>
        </div>


    </div>
</div>
<span class="badge badge--approved" ng-if="resultPerResource.issues.length ===0" translate="validation.issueType.NoIssuesFound"></span>
