<div class="filter-group filter-group--search">
    <a href="" class="inherit" ng-click="vm.filterConfig.expanded = !vm.filterConfig.expanded">
        <h5>
            <span class="text-capitalize" translate="{{vm.filterConfig.titleTranslation}}">Translation missing</span>
            <span class="gb-icon-angle-down pull-right" ng-if="!vm.filterConfig.expanded"></span>
            <span class="gb-icon-angle-up pull-right" ng-if="vm.filterConfig.expanded"></span>
        </h5>
    </a>

    <div class="filter-group__filter" ng-class="{'filter-group__filter--collapsed': !vm.filterConfig.expanded}">

        <div ng-if="vm.query.length > 0" class="is-padded">
            <div class="checkbox" ng-repeat="key in vm.query">
                <label>
                    <input type="checkbox" checklist-model="vm.query" checklist-value="key" ng-change="vm.change(key, checked)">
                    <span class="filter-group__filter__name">
                        <div class="filter-group__filter__name__bar" ng-style="vm.getWidth(key)" ng-if="vm.filterConfig.facets.hasFacets"></div>
                        <span>{{vm.usedKeys[key].title}}</span>
                        <span class="filter-group__filter__name__count" ng-if="vm.showFacetCount() && vm.filterState.data.facets" >
                            {{vm.filterState.data.facets[vm.filterConfig.facets.facetKey].counts[key].count || 0 | localNumber:vm.filterState.query.locale}}
                        </span>
                    </span>
                </label>
            </div>
            <!--<ng-include src="vm.listTemplate"></ng-include>-->
        </div>
        <div class="filter-group__filter__search seperator" ng-if="vm.filterConfig.expanded && vm.filterConfig.search.isSearchable">
            <input type="text"
                   focus-me="vm.filterConfig.expanded"
                   autocomplete="off"
                   class="fit-suggestions"
                   ng-model="vm.selected"
                   placeholder="search"
                   uib-typeahead="suggestion[vm.filterConfig.search.suggestShortName] for suggestion in vm.getSuggestions($viewValue)"
                   typeahead-on-select="vm.typeaheadSelect($item, $model, $label, $event)"
                   typeahead-focus-first="true"
                   typeahead-template-url="{{vm.filterConfig.search.suggestTemplate}}"
                   ng-keyup="vm.searchOnEnter($event)">
        </div>

        <div class="is-padded overflow-hidden" ng-if="vm.filterConfig.expanded && vm.filterConfig.facets.hasFacets">
            <div class="checkbox" ng-repeat="(key, facet) in vm.facetSuggestions.counts" ng-if="vm.query.length > 0 && !vm.inQuery(key)">
                <label>
                    <input type="checkbox" checklist-model="vm.query" checklist-value="key" ng-change="vm.change(key, checked)">
                    <span class="filter-group__filter__name">
                        <span>{{facet.title}}</span>
                        <span class="filter-group__filter__name__count">{{facet.count | localNumber:vm.filterState.query.locale}}</span>
                    </span>
                </label>
            </div>

            <div class="checkbox" ng-repeat="(key, facet) in vm.filterState.data.facets[vm.filterConfig.facets.facetKey].counts" ng-if="vm.query.length == 0">
                <label>
                    <input type="checkbox" checklist-model="vm.query" checklist-value="key" ng-change="vm.change(key, checked)">
                    <span class="filter-group__filter__name">
                        <span>{{facet.title}}</span>
                        <span class="filter-group__filter__name__count">{{facet.count | localNumber:vm.filterState.query.locale}}</span>
                    </span>
                </label>
            </div>

        </div>

        <div class="site-drawer__bar seperator" ng-if="vm.filterConfig.expanded && vm.query.length > 0">
            <a href="" class="site-drawer__bar__action" ng-click="vm.uncheckAll()">
                <span translate="stdTerms.clear">Clear</span>
            </a>
        </div>

    </div>



    <!--<div class="filter-group filter-group&#45;&#45;search">-->
    <!--<a href="" class="inherit" ng-click="vm.collapsed = !vm.collapsed">-->
    <!--<h5>-->
    <!--<span class="text-capitalize" translate="{{vm.filterConfig.translationPrefix}}.{{vm.title}}">{{vm.title}}</span>-->
    <!--<span class="gb-icon-angle-down pull-right" ng-if="vm.collapsed"></span>-->
    <!--<span class="gb-icon-angle-up pull-right" ng-if="!vm.collapsed"></span>-->
    <!--</h5>-->
    <!--</a>-->

    <!--<div class="filter-group__filter" ng-class="{'filter-group__filter&#45;&#45;collapsed': vm.collapsed}">-->
    <!--<div class="filter-group__filter__search" ng-if="!vm.collapsed">-->
    <!--<input type="text"-->
    <!--focus-me="!vm.collapsed"-->
    <!--autocomplete="off"-->
    <!--class="fit-suggestions"-->
    <!--ng-model="vm.selected"-->
    <!--placeholder="{{ vm.filterState.placeholder | translate }}"-->
    <!--uib-typeahead="suggestion[vm.filterConfig.shortName] for suggestion in vm.getSuggestions($viewValue)"-->
    <!--typeahead-on-select="vm.typeaheadSelect($item, $model, $label, $event)"-->
    <!--typeahead-focus-first="true"-->
    <!--typeahead-template-url="{{vm.filterConfig.suggestTemplate}}">-->
    <!--</div>-->
    <!--<div ng-if="vm.query.length > 0" class="is-padded">-->
    <!--<div class="checkbox" ng-repeat="key in vm.query">-->
    <!--<label>-->
    <!--<input type="checkbox" checklist-model="vm.query" checklist-value="key" ng-change="vm.change(key, checked)">-->
    <!--<span ng-if="vm.usedKeys[key][vm.filterConfig.longName]">-->
    <!--{{vm.usedKeys[key][vm.filterConfig.longName]}}-->
    <!--</span>-->
    <!--<span ng-if="!vm.usedKeys[key][vm.filterConfig.longName]">-->
    <!--{{vm.usedKeys[key][vm.filterConfig.shortName]}}-->
    <!--</span>-->
    <!--</label>-->
    <!--</div>-->
    <!--</div>-->
    <!--&lt;!&ndash;<div class="is-padded" ng-if="!vm.collapsed">&ndash;&gt;-->
    <!--&lt;!&ndash;<div class="checkbox" ng-repeat="(key, facet) in vm.filterState.data.facets.DATASET_KEY.counts" ng-if="!vm.inQuery(key)">&ndash;&gt;-->
    <!--&lt;!&ndash;<label>&ndash;&gt;-->
    <!--&lt;!&ndash;<input type="checkbox" ng-click="vm.change(key, checked)">&ndash;&gt;-->
    <!--&lt;!&ndash;<span>&ndash;&gt;-->
    <!--&lt;!&ndash;{{facet.title}}&ndash;&gt;-->
    <!--&lt;!&ndash;</span>&ndash;&gt;-->
    <!--&lt;!&ndash;</label>&ndash;&gt;-->
    <!--&lt;!&ndash;</div>&ndash;&gt;-->
    <!--&lt;!&ndash;</div>&ndash;&gt;-->
    <!--<div class="site-drawer__bar seperator" ng-if="!vm.collapsed && vm.query.length > 0">-->
    <!--<a href="" class="site-drawer__bar__action" ng-click="vm.uncheckAll()">-->
    <!--<span translate="stdTerms.clear">Clear</span>-->
    <!--</a>-->
    <!--</div>-->

    <!--</div>-->
    <!--</div>-->



</div>


