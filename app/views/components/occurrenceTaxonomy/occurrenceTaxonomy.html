<div class="occurrenceTaxonomy">
    <ng-transclude></ng-transclude>
    <div>
        <ul class="occurrenceTaxonomy__root">
            <li>
                <div class="pipe"></div>
                <div class="title occurrenceTaxonomy__toggle">
                    <a ng-click="vm.showFrequenyTree = !vm.showFrequenyTree" href="" ng-class="{isActive: !vm.showFrequenyTree}">Explore</a>
                    <a ng-click="vm.showFrequenyTree = !vm.showFrequenyTree" href="" ng-class="{isActive: vm.showFrequenyTree}">Frequent taxa</a>
                </div>
                <ul class="hasTreeLines" ng-if="!vm.showFrequenyTree">
                    <li ng-repeat="item in vm.fullTree.children">
                        <div class="pipe"></div>
                        <div class="title">
                            <a ng-click="vm.toggleTaxa(item)" href="" class="inherit noUnderline">{{item.canonicalName}}</a>
                            <a href="" ng-click="vm.search(item.key)" class="discreet--very occurrenceTaxonomy__filter inherit noUnderline">{{item._count | localNumber }}</a>
                        </div>
                        <div ng-include="'/templates/components/occurrenceTaxonomy/partialExplorerTree.html'"></div>
                    </li>
                    <li ng-if="vm.fullTree.expanded && vm.fullTree.state == 'LOADING'">
                        <div class="pipe"></div>
                        <div class="title title--action loadingNode">
                            <span class="loading"></span>
                        </div>
                    </li>
                    <li ng-if="vm.fullTree.expanded && vm.fullTree.state == 'MORE'">
                        <div class="pipe"></div>
                        <div class="title title--action">
                            <a href="" ng-click="vm.appendTaxa(vm.fullTree)">â€¦</a>
                        </div>
                    </li>
                    <li ng-if="vm.fullTree.expanded && vm.fullTree.state == 'EMPTY'">
                        <div class="pipe"></div>
                        <div class="title title--action">
                            <span>No immediate children</span>
                        </div>
                    </li>
                </ul>
                <ul class="hasTreeLines" ng-if="vm.showFrequenyTree">
                    <li ng-repeat="item in vm.tree">
                        <div class="pipe"></div>
                        <a ng-click="vm.search(item.key)" href="" class="title inherit noUnderline">
                            <div style="width:{{item.percentage | formatAsPercentage}}%"></div>
                            <span>{{item.canonicalName}}</span><span class="discreet--very">{{item.percentage | formatAsPercentage }}%</span>
                        </a>
                        <div ng-include="'/templates/components/occurrenceTaxonomy/partialTree.html'"></div>
                    </li>
                </ul>
            </li>
        </ul>
    </div>

    <!--<ul class="occurrenceTaxonomy__root">-->
        <!--<li>-->
            <!--<div class="pipe"></div>-->
            <!--<div class="title">-->
                <!--<span>Frequent taxa</span>-->
            <!--</div>-->
            <!--<ul class="hasTreeLines">-->
                <!--<li ng-repeat="item in vm.tree">-->
                    <!--<div class="pipe"></div>-->
                    <!--<a ng-click="vm.search(item.key)" href="" class="title inherit noUnderline">-->
                        <!--<div style="width:{{item.percentage | formatAsPercentage}}%"></div>-->
                        <!--<span>{{item.canonicalName}}</span><span class="discreet&#45;&#45;very">{{item.percentage | formatAsPercentage }}%</span>-->
                    <!--</a>-->
                    <!--<div ng-include="'/templates/components/occurrenceTaxonomy/partialTree.html'"></div>-->
                <!--</li>-->
            <!--</ul>-->
        <!--</li>-->
    <!--</ul>-->
</div>